{"version":3,"file":"js/resources_js_components_pages_patient_billing_CreditNote_vue.js","mappings":"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","sources":["webpack://medic-hospital-management/resources/js/components/pages/patient/billing/CreditNote.vue","webpack://medic-hospital-management/./resources/js/components/pages/patient/billing/CreditNote.vue","webpack://medic-hospital-management/./resources/js/utils/date.js","webpack://medic-hospital-management/./resources/js/components/pages/patient/billing/CreditNote.vue?ae50","webpack://medic-hospital-management/./resources/js/components/pages/patient/billing/CreditNote.vue?56e7","webpack://medic-hospital-management/./resources/js/components/pages/patient/billing/CreditNote.vue?4c37","webpack://medic-hospital-management/./resources/js/components/pages/patient/billing/CreditNote.vue?2f2d","webpack://medic-hospital-management/./resources/js/components/pages/patient/billing/CreditNote.vue?2bda","webpack://medic-hospital-management/./resources/js/components/pages/patient/billing/CreditNote.vue?431e"],"sourcesContent":["<script>\n\nimport { toPrice } from '@plugins/money'\nimport { formatDate } from '@utils/date'\n// import {maxValue, minValue, required} from \"vuelidate/lib/validators\";\n\nexport default {\n\n  filters: {\n    toMoneyFormat: function (value) {\n      if (!value) return 0.00\n\n      return toPrice(value).toFormat('0,0.00')\n    },\n  },\n  props: {\n    invoice: {\n      type: Object,\n      required: true,\n    },\n  },\n\n  data () {\n    return {\n      form: new window.Form({\n        ledger_id: this.invoice.id,\n        item_id: null,\n        quantity: 1,\n        unit_price: 0,\n        date: formatDate(new Date(), 'yyyy-MM-dd'),\n        comments: '',\n      }),\n\n      patientBills: [],\n\n      tableFields: [\n        {\n          key: 'description',\n          label: 'Description',\n        },\n        {\n          key: 'total',\n          label: 'Amount',\n        },\n      ],\n\n      totalBill: 0,\n\n      selectedBills: [],\n    }\n  },\n\n  computed: {\n    billsTable () {\n      return this.$refs.billsTable\n    },\n\n  },\n\n  methods: {\n    applyCreditNote () {\n      const creditNotes = this.patientBills.filter((bill) => bill.credit_note > 0)\n\n      if (creditNotes.length) {\n        const safeData = creditNotes.map((bill) => {\n          return {\n            date: bill.date,\n            unit_price: bill.credit_note * -1,\n            item_id: bill.item_id,\n            description: 'Credit Note: ' + bill.description,\n            quantity: 1,\n            // ledger_id: bill.ledger_id,\n            instructions: 'Credit Note',\n          }\n        })\n\n        this.$httpClient.post('/patient-bills', {\n          ledger_id: this.invoice.id,\n          items: safeData,\n        })\n          .then(() => {\n            this.$emit('bill:added')\n\n            this.$bvModal.hide('cnote-modal')\n          }).catch((error) => {\n            this.$toast.error(error.message)\n          })\n      }\n    },\n\n    cleanup () {\n      this.form.reset()\n      this.selectedCalculation = 0\n      this.selectedPercentage = 0\n      this.totalBill = 0\n    },\n\n    findPatientBills () {\n      this.$httpClient.get('/patient-billing/patient-bills/' + this.invoice.hashid)\n        .then(({ data }) => {\n          this.patientBills = data.bills\n            .filter((bill) => bill.paid === false && bill.is_inventory === false && bill.is_payment === false && bill.is_discount === false && bill.total > 0)\n            .map(function (bill) {\n              return {\n                item_id: bill.item_id,\n                description: bill.description,\n                unit_price: bill.unit_price,\n                total: bill.total,\n                credit_note: 0,\n                quantity: 1,\n                // date: formatDate(new Date(), 'yyyy-MM-dd'),\n                // ledger_id: vm.invoice.id,\n                instruction: 'Credit Note',\n              }\n            })\n        }).catch()\n    },\n  },\n}\n</script>\n\n<template>\n  <b-modal\n    id=\"cnote-modal\"\n    hide-header-close\n    title-class=\"font-18\"\n    no-close-on-backdrop\n    size=\"xl\"\n    lazy\n    scrollable\n    @shown=\"findPatientBills\"\n    @hidden=\"cleanup\"\n  >\n    <template #modal-title>\n      Credit Note\n    </template>\n\n    <div class=\"row\">\n      <div class=\"col-xl-12\">\n        <table class=\"styled-table\">\n          <thead>\n            <tr>\n              <th style=\"width: 60%\" class=\"ps-3\">\n                Description\n              </th>\n              <th style=\"width: 10%\" class=\"text-end pe-3\">\n                Amount\n              </th>\n              <th style=\"width: 30%\">\n                Credit Note\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(bill, index) in patientBills\" :key=\"index\">\n              <td class=\"ps-3\">\n                {{ bill.description }}\n              </td>\n              <td class=\"text-end pe-3\">\n                {{ bill.total | toMoneyFormat }}\n              </td>\n              <td>\n                <medic-money\n                  :value=\"patientBills[index].credit_note\"\n                  @input=\"(amount) => {\n                    patientBills[index].credit_note = amount\n                  }\"\n                />\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n\n    <template #modal-footer=\"{cancel}\">\n      <button\n        :disabled=\"form.processing\"\n        class=\"btn me-4\"\n        @click.prevent=\"cancel\"\n      >\n        Close\n      </button>\n\n      <button\n        :disabled=\"form.processing\"\n        type=\"submit\"\n        class=\"btn btn-success me-2\"\n        @click.prevent=\"applyCreditNote\"\n      >\n        Submit\n      </button>\n    </template>\n  </b-modal>\n</template>\n\n<style scoped>\n.styled-table {\n    border-collapse: collapse;\n    margin: 0 0;\n    font-size: 1em;\n    font-family: sans-serif;\n    min-width: 100%;\n}\n\n.styled-table thead tr {\n    background-color: #009879;\n    color: #ffffff;\n    text-align: left;\n}\n\n.styled-table th,\n.styled-table td {\n    padding: 6px 10px;\n}\n\n.styled-table tbody tr {\n//border-bottom: 1px solid #dddddd;\n}\n\n.styled-table tbody tr td {\n    border: 1px solid #f3f3f3\n}\n\n.styled-table tbody tr:nth-of-type(even) {\n//background-color: #f3f3f3;\n}\n\n.styled-table tbody tr.active-row {\n    font-weight: bold;\n    color: #009879;\n}\n\n</style>\n","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"b-modal\",\n    {\n      attrs: {\n        id: \"cnote-modal\",\n        \"hide-header-close\": \"\",\n        \"title-class\": \"font-18\",\n        \"no-close-on-backdrop\": \"\",\n        size: \"xl\",\n        lazy: \"\",\n        scrollable: \"\",\n      },\n      on: { shown: _vm.findPatientBills, hidden: _vm.cleanup },\n      scopedSlots: _vm._u([\n        {\n          key: \"modal-title\",\n          fn: function () {\n            return [_vm._v(\"\\n    Credit Note\\n  \")]\n          },\n          proxy: true,\n        },\n        {\n          key: \"modal-footer\",\n          fn: function ({ cancel }) {\n            return [\n              _c(\n                \"button\",\n                {\n                  staticClass: \"btn me-4\",\n                  attrs: { disabled: _vm.form.processing },\n                  on: {\n                    click: function ($event) {\n                      $event.preventDefault()\n                      return cancel.apply(null, arguments)\n                    },\n                  },\n                },\n                [_vm._v(\"\\n      Close\\n    \")]\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"button\",\n                {\n                  staticClass: \"btn btn-success me-2\",\n                  attrs: { disabled: _vm.form.processing, type: \"submit\" },\n                  on: {\n                    click: function ($event) {\n                      $event.preventDefault()\n                      return _vm.applyCreditNote.apply(null, arguments)\n                    },\n                  },\n                },\n                [_vm._v(\"\\n      Submit\\n    \")]\n              ),\n            ]\n          },\n        },\n      ]),\n    },\n    [\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"row\" }, [\n        _c(\"div\", { staticClass: \"col-xl-12\" }, [\n          _c(\"table\", { staticClass: \"styled-table\" }, [\n            _c(\"thead\", [\n              _c(\"tr\", [\n                _c(\n                  \"th\",\n                  { staticClass: \"ps-3\", staticStyle: { width: \"60%\" } },\n                  [_vm._v(\"\\n              Description\\n            \")]\n                ),\n                _vm._v(\" \"),\n                _c(\n                  \"th\",\n                  {\n                    staticClass: \"text-end pe-3\",\n                    staticStyle: { width: \"10%\" },\n                  },\n                  [_vm._v(\"\\n              Amount\\n            \")]\n                ),\n                _vm._v(\" \"),\n                _c(\"th\", { staticStyle: { width: \"30%\" } }, [\n                  _vm._v(\"\\n              Credit Note\\n            \"),\n                ]),\n              ]),\n            ]),\n            _vm._v(\" \"),\n            _c(\n              \"tbody\",\n              _vm._l(_vm.patientBills, function (bill, index) {\n                return _c(\"tr\", { key: index }, [\n                  _c(\"td\", { staticClass: \"ps-3\" }, [\n                    _vm._v(\n                      \"\\n              \" +\n                        _vm._s(bill.description) +\n                        \"\\n            \"\n                    ),\n                  ]),\n                  _vm._v(\" \"),\n                  _c(\"td\", { staticClass: \"text-end pe-3\" }, [\n                    _vm._v(\n                      \"\\n              \" +\n                        _vm._s(_vm._f(\"toMoneyFormat\")(bill.total)) +\n                        \"\\n            \"\n                    ),\n                  ]),\n                  _vm._v(\" \"),\n                  _c(\n                    \"td\",\n                    [\n                      _c(\"medic-money\", {\n                        attrs: { value: _vm.patientBills[index].credit_note },\n                        on: {\n                          input: (amount) => {\n                            _vm.patientBills[index].credit_note = amount\n                          },\n                        },\n                      }),\n                    ],\n                    1\n                  ),\n                ])\n              }),\n              0\n            ),\n          ]),\n        ]),\n      ]),\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import {format} from 'date-fns'\n\nexport function formatDate(date, formatString = 'MMM Do, yyyy') {\n  return format(date, formatString)\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/laravel-mix/node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/laravel-mix/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.styled-table[data-v-4d7b097f] {\\n    border-collapse: collapse;\\n    margin: 0 0;\\n    font-size: 1em;\\n    font-family: sans-serif;\\n    min-width: 100%;\\n}\\n.styled-table thead tr[data-v-4d7b097f] {\\n    background-color: #009879;\\n    color: #ffffff;\\n    text-align: left;\\n}\\n.styled-table th[data-v-4d7b097f],\\n.styled-table td[data-v-4d7b097f] {\\n    padding: 6px 10px;\\n}\\n.styled-table tbody tr[data-v-4d7b097f] {\\n//border-bottom: 1px solid #dddddd;\\n}\\n.styled-table tbody tr td[data-v-4d7b097f] {\\n    border: 1px solid #f3f3f3\\n}\\n.styled-table tbody tr[data-v-4d7b097f]:nth-of-type(even) {\\n//background-color: #f3f3f3;\\n}\\n.styled-table tbody tr.active-row[data-v-4d7b097f] {\\n    font-weight: bold;\\n    color: #009879;\\n}\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./resources/js/components/pages/patient/billing/CreditNote.vue\"],\"names\":[],\"mappings\":\";AAqMA;IACA,yBAAA;IACA,WAAA;IACA,cAAA;IACA,uBAAA;IACA,eAAA;AACA;AAEA;IACA,yBAAA;IACA,cAAA;IACA,gBAAA;AACA;AAEA;;IAEA,iBAAA;AACA;AAEA;AACA,kCAAA;AACA;AAEA;IACA;AACA;AAEA;AACA,2BAAA;AACA;AAEA;IACA,iBAAA;IACA,cAAA;AACA\",\"sourcesContent\":[\"<script>\\n\\nimport { toPrice } from '@plugins/money'\\nimport { formatDate } from '@utils/date'\\n// import {maxValue, minValue, required} from \\\"vuelidate/lib/validators\\\";\\n\\nexport default {\\n\\n  filters: {\\n    toMoneyFormat: function (value) {\\n      if (!value) return 0.00\\n\\n      return toPrice(value).toFormat('0,0.00')\\n    },\\n  },\\n  props: {\\n    invoice: {\\n      type: Object,\\n      required: true,\\n    },\\n  },\\n\\n  data () {\\n    return {\\n      form: new window.Form({\\n        ledger_id: this.invoice.id,\\n        item_id: null,\\n        quantity: 1,\\n        unit_price: 0,\\n        date: formatDate(new Date(), 'yyyy-MM-dd'),\\n        comments: '',\\n      }),\\n\\n      patientBills: [],\\n\\n      tableFields: [\\n        {\\n          key: 'description',\\n          label: 'Description',\\n        },\\n        {\\n          key: 'total',\\n          label: 'Amount',\\n        },\\n      ],\\n\\n      totalBill: 0,\\n\\n      selectedBills: [],\\n    }\\n  },\\n\\n  computed: {\\n    billsTable () {\\n      return this.$refs.billsTable\\n    },\\n\\n  },\\n\\n  methods: {\\n    applyCreditNote () {\\n      const creditNotes = this.patientBills.filter((bill) => bill.credit_note > 0)\\n\\n      if (creditNotes.length) {\\n        const safeData = creditNotes.map((bill) => {\\n          return {\\n            date: bill.date,\\n            unit_price: bill.credit_note * -1,\\n            item_id: bill.item_id,\\n            description: 'Credit Note: ' + bill.description,\\n            quantity: 1,\\n            // ledger_id: bill.ledger_id,\\n            instructions: 'Credit Note',\\n          }\\n        })\\n\\n        this.$httpClient.post('/patient-bills', {\\n          ledger_id: this.invoice.id,\\n          items: safeData,\\n        })\\n          .then(() => {\\n            this.$emit('bill:added')\\n\\n            this.$bvModal.hide('cnote-modal')\\n          }).catch((error) => {\\n            this.$toast.error(error.message)\\n          })\\n      }\\n    },\\n\\n    cleanup () {\\n      this.form.reset()\\n      this.selectedCalculation = 0\\n      this.selectedPercentage = 0\\n      this.totalBill = 0\\n    },\\n\\n    findPatientBills () {\\n      this.$httpClient.get('/patient-billing/patient-bills/' + this.invoice.hashid)\\n        .then(({ data }) => {\\n          this.patientBills = data.bills\\n            .filter((bill) => bill.paid === false && bill.is_inventory === false && bill.is_payment === false && bill.is_discount === false && bill.total > 0)\\n            .map(function (bill) {\\n              return {\\n                item_id: bill.item_id,\\n                description: bill.description,\\n                unit_price: bill.unit_price,\\n                total: bill.total,\\n                credit_note: 0,\\n                quantity: 1,\\n                // date: formatDate(new Date(), 'yyyy-MM-dd'),\\n                // ledger_id: vm.invoice.id,\\n                instruction: 'Credit Note',\\n              }\\n            })\\n        }).catch()\\n    },\\n  },\\n}\\n</script>\\n\\n<template>\\n  <b-modal\\n    id=\\\"cnote-modal\\\"\\n    hide-header-close\\n    title-class=\\\"font-18\\\"\\n    no-close-on-backdrop\\n    size=\\\"xl\\\"\\n    lazy\\n    scrollable\\n    @shown=\\\"findPatientBills\\\"\\n    @hidden=\\\"cleanup\\\"\\n  >\\n    <template #modal-title>\\n      Credit Note\\n    </template>\\n\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xl-12\\\">\\n        <table class=\\\"styled-table\\\">\\n          <thead>\\n            <tr>\\n              <th style=\\\"width: 60%\\\" class=\\\"ps-3\\\">\\n                Description\\n              </th>\\n              <th style=\\\"width: 10%\\\" class=\\\"text-end pe-3\\\">\\n                Amount\\n              </th>\\n              <th style=\\\"width: 30%\\\">\\n                Credit Note\\n              </th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            <tr v-for=\\\"(bill, index) in patientBills\\\" :key=\\\"index\\\">\\n              <td class=\\\"ps-3\\\">\\n                {{ bill.description }}\\n              </td>\\n              <td class=\\\"text-end pe-3\\\">\\n                {{ bill.total | toMoneyFormat }}\\n              </td>\\n              <td>\\n                <medic-money\\n                  :value=\\\"patientBills[index].credit_note\\\"\\n                  @input=\\\"(amount) => {\\n                    patientBills[index].credit_note = amount\\n                  }\\\"\\n                />\\n              </td>\\n            </tr>\\n          </tbody>\\n        </table>\\n      </div>\\n    </div>\\n\\n    <template #modal-footer=\\\"{cancel}\\\">\\n      <button\\n        :disabled=\\\"form.processing\\\"\\n        class=\\\"btn me-4\\\"\\n        @click.prevent=\\\"cancel\\\"\\n      >\\n        Close\\n      </button>\\n\\n      <button\\n        :disabled=\\\"form.processing\\\"\\n        type=\\\"submit\\\"\\n        class=\\\"btn btn-success me-2\\\"\\n        @click.prevent=\\\"applyCreditNote\\\"\\n      >\\n        Submit\\n      </button>\\n    </template>\\n  </b-modal>\\n</template>\\n\\n<style scoped>\\n.styled-table {\\n    border-collapse: collapse;\\n    margin: 0 0;\\n    font-size: 1em;\\n    font-family: sans-serif;\\n    min-width: 100%;\\n}\\n\\n.styled-table thead tr {\\n    background-color: #009879;\\n    color: #ffffff;\\n    text-align: left;\\n}\\n\\n.styled-table th,\\n.styled-table td {\\n    padding: 6px 10px;\\n}\\n\\n.styled-table tbody tr {\\n//border-bottom: 1px solid #dddddd;\\n}\\n\\n.styled-table tbody tr td {\\n    border: 1px solid #f3f3f3\\n}\\n\\n.styled-table tbody tr:nth-of-type(even) {\\n//background-color: #f3f3f3;\\n}\\n\\n.styled-table tbody tr.active-row {\\n    font-weight: bold;\\n    color: #009879;\\n}\\n\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import api from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../../../node_modules/laravel-mix/node_modules/css-loader/dist/cjs.js??clonedRuleSet-9.use[1]!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-9.use[2]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreditNote.vue?vue&type=style&index=0&id=4d7b097f&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./CreditNote.vue?vue&type=template&id=4d7b097f&scoped=true&\"\nimport script from \"./CreditNote.vue?vue&type=script&lang=js&\"\nexport * from \"./CreditNote.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CreditNote.vue?vue&type=style&index=0&id=4d7b097f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d7b097f\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/bismarck/Documents/software/ponacare-medical/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4d7b097f')) {\n      api.createRecord('4d7b097f', component.options)\n    } else {\n      api.reload('4d7b097f', component.options)\n    }\n    module.hot.accept(\"./CreditNote.vue?vue&type=template&id=4d7b097f&scoped=true&\", function () {\n      api.rerender('4d7b097f', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/components/pages/patient/billing/CreditNote.vue\"\nexport default component.exports","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreditNote.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreditNote.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??ruleSet[1].rules[2]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreditNote.vue?vue&type=template&id=4d7b097f&scoped=true&\"","export * from \"-!../../../../../../node_modules/style-loader/dist/cjs.js!../../../../../../node_modules/laravel-mix/node_modules/css-loader/dist/cjs.js??clonedRuleSet-9.use[1]!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-9.use[2]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreditNote.vue?vue&type=style&index=0&id=4d7b097f&scoped=true&lang=css&\""],"names":["toPrice","formatDate","filters","toMoneyFormat","value","toFormat","props","invoice","type","Object","required","data","form","window","Form","ledger_id","id","item_id","quantity","unit_price","date","Date","comments","patientBills","tableFields","key","label","totalBill","selectedBills","computed","billsTable","$refs","methods","applyCreditNote","_this","creditNotes","filter","bill","credit_note","length","safeData","map","description","instructions","$httpClient","post","items","then","$emit","$bvModal","hide","error","$toast","message","cleanup","reset","selectedCalculation","selectedPercentage","findPatientBills","_this2","get","hashid","_ref","bills","paid","is_inventory","is_payment","is_discount","total","instruction","render","_vm","_c","_self","attrs","size","lazy","scrollable","on","shown","hidden","scopedSlots","_u","fn","_v","proxy","cancel","staticClass","disabled","processing","click","$event","preventDefault","apply","arguments","staticStyle","width","_l","index","_s","_f","input","amount","staticRenderFns","_withStripped","format","formatString","undefined"],"sourceRoot":""}