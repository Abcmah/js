"use strict";(self.webpackChunkmedic_hospital_management=self.webpackChunkmedic_hospital_management||[]).push([[189],{3819:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(1519),l=s.n(a)()((function(e){return e[1]}));l.push([e.id,".styled-table[data-v-055a1f44]{//font-family:sans-serif;border-collapse:collapse;font-size:14px;margin:0;width:100%}.styled-table thead tr[data-v-055a1f44]{background-color:#009879;color:#fff;text-align:left}.styled-table th[data-v-055a1f44]{padding:10px}.styled-table td[data-v-055a1f44]{padding:5px 10px}.styled-table tbody tr[data-v-055a1f44]{//border-bottom:1px solid #ddd}.styled-table tbody tr td[data-v-055a1f44]{border:1px solid #f3f3f3}.styled-table tbody tr[data-v-055a1f44]:nth-of-type(2n){//background-color:#f3f3f3}.styled-table tbody tr.active-row[data-v-055a1f44]{color:#009879;font-weight:700}",""]);const r=l},3189:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});const a=(0,s(538).defineComponent)({name:"ResultsManager",props:{selectedBill:{type:Object,default:function(){return null}},resultModalId:{type:String,default:"result-modal"},sampleModalId:{type:String,default:"sample-modal"}},data:function(){return{resultsForm:new window.Form({results:[],remarks:"",transaction_id:""}),templates:[],sampleForm:new window.Form({id:"",transaction_id:"",collection_date:"",received_date:"",from:0,source_from:"",specimen:"",equipment_code:"",status:0}),sampleSources:[{name:"Internal",id:0},{name:"Referral",id:1}]}},methods:{findTemplates:function(){var e=this;this.resultsForm.results=[],this.$httpClient.get("/patient-bills/"+this.selectedBill.id+"/templates").then((function(t){var s=t.data.data;if(s.length){e.resultsForm.results=s.map((function(e){var t={template_id:e.template_id,template_type:e.template_type};return 0===e.template_type&&(t.result=e.results),1===e.template_type&&(t.result=e.template_narrative),t}));var a=s.find((function(e){return null!==e.result_remarks}));a&&(e.resultsForm.remarks=a.result_remarks)}e.templates=s,e.sampleForm.transaction_id=e.templates[0].transaction_id,e.sampleForm.id=e.templates[0].sample_id,e.sampleForm.from=e.templates[0].sample_from,e.sampleForm.source_from=e.templates[0].sample_source_from,e.sampleForm.specimen=e.templates[0].sample_specimen,e.sampleForm.equipment_code=e.templates[0].sample_equipment_code,e.sampleForm.status=e.templates[0].sample_status})).catch((function(e){console.error(e.message)}))},openResultsModal:function(){this.resultsForm.transaction_id=this.selectedBill.id,this.findTemplates(),0!==this.selectedBill.samples_collected?this.$bvModal.show("result-modal"):this.$bvModal.show("sample-modal")},saveSamples:function(){var e=this;this.sampleForm.post("/samples").then((function(){e.$toast.success("The samples have been collected"),e.$bvModal.hide("sample-modal"),setTimeout((function(){window.location.reload()}),300)})).catch()},saveResults:function(){var e=this;this.resultsForm.post("/results").then((function(){e.$bvModal.hide("result-modal"),e.$toast.success("The Results have been saved"),setTimeout((function(){window.location.reload()}),300)})).catch()},resetForm:function(){this.resultsForm.reset(),this.sampleForm.reset()}}});var l=s(3379),r=s.n(l),o=s(3819),n={insert:"head",singleton:!1};r()(o.Z,n);o.Z.locals;const m=(0,s(1900).Z)(a,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("b-modal",{attrs:{id:"sample-modal",title:"Sample Collection","no-close-on-backdrop":"","footer-class":"d-flex justify-content-end bg-muted-lt pt-2 border-top","content-class":"bg-white rounded-3","modal-class":"modal-blur","hide-header-close":"","no-close-on-esc":"","no-enforce-focus":""},on:{hidden:e.resetForm},scopedSlots:e._u([{key:"modal-footer",fn:function(s){var a=s.cancel;return[t("button",{staticClass:"btn me-auto",attrs:{type:"button",disabled:e.sampleForm.processing},on:{click:function(e){return e.preventDefault(),a.apply(null,arguments)}}},[e._v("\n                Close\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:e.sampleForm.processing},on:{click:e.saveSamples}},[e._v("\n                Submit\n            ")])]}}])},[e.templates.length?t("div",[t("div",{staticClass:"mb-3"},[t("label",{staticClass:"form-label",attrs:{for:""}},[e._v("Sample Source")]),e._v(" "),t("div",[t("v-select",{attrs:{label:"name",clearable:!1,reduce:function(e){return e.id},options:e.sampleSources},model:{value:e.sampleForm.from,callback:function(t){e.$set(e.sampleForm,"from",t)},expression:"sampleForm.from"}}),e._v(" "),e.sampleForm.hasError("from")?t("div",{staticClass:"text-danger",domProps:{textContent:e._s(e.sampleForm.getError("from"))}}):e._e()],1)]),e._v(" "),t("div",{staticClass:"mb-3"},[t("label",{staticClass:"form-label"},[e._v("Request From")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.sampleForm.source_from,expression:"sampleForm.source_from"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Doctor's Name, Hospital Name"},domProps:{value:e.sampleForm.source_from},on:{input:function(t){t.target.composing||e.$set(e.sampleForm,"source_from",t.target.value)}}}),e._v(" "),e.sampleForm.hasError("source_from")?t("div",{staticClass:"text-danger",domProps:{textContent:e._s(e.sampleForm.getError("source_from"))}}):e._e()]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-xl-6"},[t("div",{staticClass:"mb-3"},[t("label",{staticClass:"form-label"},[e._v("Specimen")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.sampleForm.specimen,expression:"sampleForm.specimen"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.sampleForm.specimen},on:{input:function(t){t.target.composing||e.$set(e.sampleForm,"specimen",t.target.value)}}}),e._v(" "),e.sampleForm.hasError("specimen")?t("div",{staticClass:"text-danger",domProps:{textContent:e._s(e.sampleForm.getError("specimen"))}}):e._e()])]),e._v(" "),t("div",{staticClass:"col-xl-6"},[t("div",{staticClass:"fv-row mb-10"},[t("label",{staticClass:"form-label"},[e._v("Equipment Code")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.sampleForm.equipment_code,expression:"sampleForm.equipment_code"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.sampleForm.equipment_code},on:{input:function(t){t.target.composing||e.$set(e.sampleForm,"equipment_code",t.target.value)}}}),e._v(" "),e.sampleForm.hasError("equipment_code")?t("div",{staticClass:"text-danger",domProps:{textContent:e._s(e.sampleForm.getError("equipment_code"))}}):e._e()])])])]):e._e()]),e._v(" "),t("b-modal",{attrs:{id:"result-modal",title:"Results Management","content-class":"bg-white rounded-3 80vh","modal-class":"modal-blur",size:"xl","hide-footer":"","hide-header-close":"","no-close-on-esc":"",scrollable:"","no-enforce-focus":""},on:{hidden:e.resetForm}},[e.templates.length?t("div",[t("table",{staticClass:"styled-table table-sm table-vcenter"},[t("thead",[t("tr",[t("th",{staticClass:"ps-2",staticStyle:{"line-height":"1"}},[e._v("TEST NAME")]),e._v(" "),t("th",{staticClass:"ps-2",staticStyle:{"line-height":"1"}},[e._v("UNITS")]),e._v(" "),t("th",{staticClass:"ps-2",staticStyle:{"line-height":"1"}},[e._v("REF. RANGE")]),e._v(" "),t("th",{staticClass:"ps-2",staticStyle:{"line-height":"1"}},[e._v("RESULTS")])])]),e._v(" "),e._l(e.templates,(function(s,a){return t("tbody",{key:a},[0===s.template_type?t("tr",{},[t("td",{staticClass:"ps-2",attrs:{width:"35%"}},[t("span",{staticStyle:{display:"block","margin-bottom":"2px","font-weight":"bold"}},[e._v(e._s(s.name))]),e._v(" "),s.remarks?t("span",{staticStyle:{display:"inline-block","white-space":"break-spaces","margin-top":"5px",color:"blueviolet"},domProps:{innerHTML:e._s(s.remarks)}}):e._e()]),e._v(" "),t("td",{attrs:{width:"25%"}},[e._v("\n                        "+e._s(s.units)+"\n                    ")]),e._v(" "),t("td",{attrs:{width:"20%"}},[0===s.template_type&&0===s.reference_type?t("span",[e._v("\n                            "+e._s(s.reference_range)+"\n                        ")]):e._e()]),e._v(" "),0===s.template_type&&0===s.reference_type?t("td",{staticClass:"ps-2",attrs:{width:"20%"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.resultsForm.results[a].result,expression:"resultsForm.results[index].result"}],staticClass:"form-control form-control-sm",staticStyle:{padding:"0.2375rem 0.75rem"},attrs:{type:"text"},domProps:{value:e.resultsForm.results[a].result},on:{input:function(t){t.target.composing||e.$set(e.resultsForm.results[a],"result",t.target.value)}}})]):e._e(),e._v(" "),0===s.template_type&&1===s.reference_type?t("td",{attrs:{width:"20%"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.resultsForm.results[a].result,expression:"resultsForm.results[index].result"}],staticClass:"form-control form-control-sm",attrs:{type:"text",list:s.template_id},domProps:{value:e.resultsForm.results[a].result},on:{input:function(t){t.target.composing||e.$set(e.resultsForm.results[a],"result",t.target.value)}}}),e._v(" "),t("datalist",{attrs:{id:s.template_id}},e._l(s.non_range_flag,(function(s){return t("option",{domProps:{value:s,textContent:e._s(s)}})})),0)]):e._e()]):e._e(),e._v(" "),1===s.template_type?t("tr",[t("td",{attrs:{width:"35%"}},[t("span",{staticStyle:{display:"block","margin-bottom":"2px"}},[e._v(e._s(s.name))]),e._v(" "),s.remarks?t("span",{staticStyle:{display:"inline-block","white-space":"break-spaces","margin-top":"5px",color:"blueviolet"},domProps:{innerHTML:e._s(s.remarks)}}):e._e()]),e._v(" "),t("td",{attrs:{width:"25%%"}},[e._v("\n                        "+e._s(s.template_narrative)+"\n                    ")]),e._v(" "),t("td",{attrs:{width:"20%"}}),e._v(" "),1===s.template_type?t("td",{staticClass:"w-25",attrs:{width:"20%"}}):e._e()]):e._e()])}))],2),e._v(" "),t("div",{staticClass:"mt-3"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.resultsForm.remarks,expression:"resultsForm.remarks"}],staticClass:"form-control form-control-solid",attrs:{name:"",id:"",cols:"30",rows:"3",placeholder:"Remarks"},domProps:{value:e.resultsForm.remarks},on:{input:function(t){t.target.composing||e.$set(e.resultsForm,"remarks",t.target.value)}}})]),e._v(" "),1===e.templates[0].template_type?t("div",{staticClass:"fv-row"},[t("label",{staticClass:"form-label",attrs:{for:""}},[e._v("Please Enter the Results")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.resultsForm.results[0].result,expression:"resultsForm.results[0].result"}],staticClass:"form-control form-control-solid",attrs:{cols:"30",rows:"15"},domProps:{value:e.resultsForm.results[0].result},on:{input:function(t){t.target.composing||e.$set(e.resultsForm.results[0],"result",t.target.value)}}})]):e._e(),e._v(" "),t("div",{staticClass:"row mt-3"},[t("div",{staticClass:"col-4 mx-auto"},[t("div",{staticClass:"d-flex justify-content-center"},[t("button",{staticClass:"btn btn-light me-3 d-inline-block",attrs:{type:"submit",disabled:e.resultsForm.processing},on:{click:function(t){return e.$bvModal.hide("result-modal")}}},[e._v("\n                            Close\n                        ")]),e._v(" "),t("button",{staticClass:"btn btn-primary d-block",attrs:{type:"submit",disabled:e.resultsForm.processing},on:{click:e.saveResults}},[e._v("\n                            Submit\n                        ")])])])])]):e._e()])],1)}),[],!1,null,"055a1f44",null).exports}}]);