"use strict";(self.webpackChunkmedic_hospital_management=self.webpackChunkmedic_hospital_management||[]).push([[363],{6581:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(1519),i=a.n(s)()((function(e){return e[1]}));i.push([e.id,".styled-table[data-v-56b9b73b]{border-collapse:collapse;font-family:sans-serif;font-size:13px;margin:0;width:100%}.styled-table thead tr[data-v-56b9b73b]{background-color:#009879;color:#fff;text-align:left}.styled-table td[data-v-56b9b73b],.styled-table th[data-v-56b9b73b]{padding:6px 10px}.styled-table tbody tr[data-v-56b9b73b]{//border-bottom:1px solid #ddd}.styled-table tbody tr td[data-v-56b9b73b]{border:1px solid #f3f3f3}.styled-table tbody tr[data-v-56b9b73b]:nth-of-type(2n){//background-color:#f3f3f3}.styled-table tbody tr.active-row[data-v-56b9b73b]{color:#009879;font-weight:700}",""]);const r=i},3363:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var s=a(538),i=a(1902);const r=(0,s.defineComponent)({name:"AdmissionDischargeForm",props:{admission:{type:Object,default:function(){return null}},dischargeTypes:{type:Array,required:!0}},data:function(){return{dischargeForm:new window.Form({admission_id:"",discharge_type_id:"",date:(new Date).toISOString().slice(0,10)}),bills:[],beds:[]}},computed:{billBalance:function(){return this.bills.bills?this.bills.balance:0}},methods:{getBed:function(){return console.log(this.beds),this.admission},onModalShow:function(){var e=this;setTimeout((function(){e.dischargeForm.admission_id=e.admission.id,e.beds=e.admission.bed_days,e.admission.discharged_at&&(e.dischargeForm.discharge_type_id=e.admission.discharge_type_id,e.dischargeForm.date=e.admission.discharged_at),i.Z.findPatientBills(e.admission.invoice.hashid).then((function(t){var a=t.data;e.bills=a})).catch((function(e){console.log(e)}))}),200)},dischargePatient:function(){var e=this;this.dischargeForm.post("/discharges").then((function(){e.$toast.success("The patient has been discharged"),e.$bvModal.hide("discharge-modal"),e.$emit("admission:discharged")})).catch()}}});var o=a(3379),d=a.n(o),n=a(6581),l={insert:"head",singleton:!1};d()(n.Z,l);n.Z.locals;const c=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("b-modal",{attrs:{id:"discharge-modal",title:"Discharge Form",lazy:"","no-close-on-backdrop":"","no-enforce-focus":!0,"hide-header-close":"",scrollable:"","modal-class":"modal-blur","content-class":"bg-white rounded-3 shadow-sm 100vh","footer-class":"d-flex justify-content-between border-top"},on:{show:e.onModalShow},scopedSlots:e._u([{key:"modal-footer",fn:function(a){var s=a.cancel;return[t("button",{staticClass:"btn btn-light me-2",attrs:{disabled:e.dischargeForm.processing},on:{click:s}},[e._v("\n        Close\n      ")]),e._v(" "),e.billBalance>0?t("button",{directives:[{name:"can",rawName:"v-can",value:"can-discharge-with-balance",expression:"'can-discharge-with-balance'"}],staticClass:"btn btn-danger",attrs:{form:"dischargeForm",disabled:e.dischargeForm.processing},on:{click:e.dischargePatient}},[e._v("\n        Discharge\n      ")]):t("button",{staticClass:"btn btn-danger",attrs:{form:"dischargeForm",disabled:e.dischargeForm.processing},on:{click:e.dischargePatient}},[e._v("\n        Discharge\n      ")])]}}])},[t("form",{attrs:{id:"dischargeForm"},on:{submit:function(t){return t.preventDefault(),e.dischargePatient.apply(null,arguments)}}},[t("div",{staticClass:"form-group mb-4"},[t("label",{staticClass:"form-label",attrs:{for:""}},[e._v("Discharge Date ")]),e._v(" "),t("date-picker",{attrs:{value:e.dischargeForm.date,"max-date":new Date},on:{"on-change":function(t,a){e.dischargeForm.date=a}}}),e._v(" "),t("small",{staticClass:"form-hint text-indigo"},[e._v("\n          Invoice date will be modified to discharge date\n        ")]),e._v(" "),e.dischargeForm.hasError("date")?t("span",{staticClass:"text-danger",domProps:{textContent:e._s(e.dischargeForm.getError("date"))}}):e._e()],1),e._v(" "),t("div",{staticClass:"form-group mb-4"},[t("label",{staticClass:"form-label",attrs:{for:"discharge_type_id"}},[e._v("Discharge Type")]),e._v(" "),t("v-select",{staticClass:"bg-white",attrs:{options:e.dischargeTypes,label:"name",reduce:function(e){return e.id},clearable:!1},model:{value:e.dischargeForm.discharge_type_id,callback:function(t){e.$set(e.dischargeForm,"discharge_type_id",t)},expression:"dischargeForm.discharge_type_id"}}),e._v(" "),e.dischargeForm.hasError("discharge_type_id")?t("span",{staticClass:"text-danger",domProps:{textContent:e._s(e.dischargeForm.getError("discharge_type_id"))}}):e._e()],1),e._v(" "),t("div",{staticClass:"form-group mb-4"},[t("label",{staticClass:"form-label",attrs:{for:""}},[e._v("Bed Days")]),e._v(" "),t("input",{staticClass:"form-control muted",attrs:{disabled:"",type:"text",name:"policy_no"},domProps:{value:e.beds}})]),e._v(" "),t("div",{staticClass:"form-group mb-4"},[t("label",{staticClass:"form-label",attrs:{for:""}},[e._v("Bill Balance")]),e._v(" "),t("medic-money",{attrs:{value:e.billBalance,disabled:""}})],1)])])],1)}),[],!1,null,"56b9b73b",null).exports}}]);