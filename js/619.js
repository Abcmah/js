"use strict";(self.webpackChunkmedic_hospital_management=self.webpackChunkmedic_hospital_management||[]).push([[619],{4619:(t,e,a)=>{a.r(e),a.d(e,{default:()=>i});var s=a(1902);const o={props:{visit:{type:Object,required:!0}},data:function(){return{fields:[{name:"created_at",title:"Date",titleClass:"text-right",dataClass:"text-right",callback:this.$options.filters.DATE_MONTH_YEAR_HOUR_MINUTES},{name:"note",title:"Note"},{name:"user.name",title:"Written By"},{name:"__slot:actions",dataClass:"text-right "}],moreParams:{filter:{patient_id:this.visit.patient_id}},form:new window.Form({id:"",patient_visit_id:this.visit.id,status:0,note:""}),status:[{name:"Shared",value:0},{name:"Private",value:1}],selectedMedicalNote:null,patientVisitRecords:this.patientVisits}},computed:{vuetable:function(){return this.$refs.table.$refs.vuetable}},watch:{"moreParams.filter.patient_visit_id":function(t){t&&this.vuetable.refresh()}},methods:{showCreateForm:function(){this.$bvModal.show("medical-modal")},viewMedicalNote:function(t){this.selectedMedicalNote=t,this.$bvModal.show("view-medical-modal")},createMedical:function(){var t=this;this.form.post("/medicals").then((function(){t.$bvModal.hide("medical-modal"),t.$toast.success("Medical Note Saved")})).catch()},showUpdateForm:function(t){this.form.populate(t),this.$bvModal.show("medical-update-modal")},updateMedical:function(){var t=this;this.form.patch("/medicals/"+this.form.id).then((function(){t.$bvModal.hide("medical-update-modal"),t.$toast.success("Changes Saved")})).catch()},deleteMedical:function(t){var e=this;this.$toast.question("Are you sure","You are deleting Medical Record").then((function(){s.Z.deleteMedical(t.id).then((function(){e.vuetable.reload(),e.$toast.info("Medical record deleted")})).catch((function(){e.$toast.error("The medical note could not be deleted")}))}))},cleanUp:function(){this.vuetable.reload()},findAllPatientVisits:function(){var t=this;s.Z.findAllPatientsVisits({page:{size:1e4},filter:{patient_id:this.patientId},sort:"-date"}).then((function(e){var a=e.data;t.patientVisits=a.data})).catch((function(e){console.log(e),t.$toast.error("Failed loading patient visits")}))}}};const i=(0,a(1900).Z)(o,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("h2",[t._v("Notes")]),t._v(" "),e("div",{staticClass:"card-actions"},[e("a",{staticClass:"btn",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.showCreateForm.apply(null,arguments)}}},[e("i",{staticClass:"uil uil-plus me-1"}),t._v(" Write Note\n        ")])])]),t._v(" "),e("VueTable",{ref:"table",attrs:{"api-url":"/medicals",fields:t.fields,"append-params":t.moreParams},scopedSlots:t._u([{key:"date",fn:function(a){return[e("div",{staticClass:"media-body align-self-center"},[e("span",{staticClass:"text-sm"},[t._v(t._s(t._f("date_DATE_MONTH_YEAR")(a.rowData.created_at))+" ")]),t._v(" "),e("div",{staticClass:"font-size-12 text-purple-400"},[e("div",{staticClass:"text-truncate d-flex justify-content-end",attrs:{id:"tooltip-target-1"}},[e("div",[t._v(t._s(t._f("TIME_HOUR_MINUTES")(a.rowData.created_at)))])])])])]}},{key:"actions",fn:function(a){return[e("div",{staticClass:"dropdown"},[e("button",{staticClass:"btn dropdown-toggle align-text-top",attrs:{"data-bs-toggle":"dropdown"}},[t._v("\n            Menu\n          ")]),t._v(" "),e("div",{staticClass:"dropdown-menu dropdown-menu-end"},[e("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return t.viewMedicalNote(a.rowData)}}},[e("i",{staticClass:"uil uil-eye me-2"}),t._v(" View\n            ")]),t._v(" "),e("div",{staticClass:"dropdown-divider"}),t._v(" "),e("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return t.showUpdateForm(a.rowData)}}},[e("i",{staticClass:"uil uil-edit me-2"}),t._v(" Update\n            ")])])])]}}])})],1),t._v(" "),e("b-modal",{attrs:{id:"medical-modal",title:"Write Note","title-class":"font-18","no-close-on-backdrop":"",size:"lg","modal-class":"modal-blur","hide-header-close":"","footer-class":"bg-light-alpha border-top d-flex justify-content-end",lazy:""},on:{hidden:t.cleanUp},scopedSlots:t._u([{key:"modal-footer",fn:function(a){var s=a.cancel;return[e("button",{staticClass:"btn me-auto",attrs:{type:"button",disabled:t.form.processing},on:{click:function(t){return t.preventDefault(),s.apply(null,arguments)}}},[t._v("\n        Dismiss\n      ")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.form.processing},on:{click:t.createMedical}},[t._v("\n        Submit\n      ")])]}}])},[e("div",{staticClass:"mb-3"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.note,expression:"form.note"}],staticClass:"form-control",attrs:{id:"note",type:"text",placeholder:"The medical notes go here ...",rows:"6",name:"note"},domProps:{value:t.form.note},on:{input:function(e){e.target.composing||t.$set(t.form,"note",e.target.value)}}}),t._v(" "),t.form.errors.has("note")?e("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.form.errors.first("note"))}}):t._e()])]),t._v(" "),e("b-modal",{attrs:{id:"medical-update-modal",title:"Medical Note","title-class":"font-18","no-close-on-backdrop":"","hide-header-close":"",size:"lg","footer-class":"d-flex justify-content-start",lazy:""},on:{hidden:t.cleanUp},scopedSlots:t._u([{key:"modal-footer",fn:function(a){var s=a.cancel;return[e("button",{staticClass:"btn btn-success",attrs:{form:"updateForm",type:"submit",disabled:t.form.processing}},[t._v("\n        "+t._s(t.form.processing?"Processing...":"Save Changes")+"\n      ")]),t._v(" "),e("button",{staticClass:"btn btn-light mx-2",attrs:{disabled:t.form.processing},on:{click:s}},[t._v("\n        Close\n      ")])]}}])},[e("form",{attrs:{id:"updateForm"},on:{submit:function(e){return e.preventDefault(),t.updateMedical.apply(null,arguments)},keydown:function(e){return t.form.errors.clear(e.target.name)}}},[e("div",{staticClass:"mb-3"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.note,expression:"form.note"}],staticClass:"form-control",attrs:{id:"note",type:"text",placeholder:"The medical notes go here ...",rows:"6",name:"note"},domProps:{value:t.form.note},on:{input:function(e){e.target.composing||t.$set(t.form,"note",e.target.value)}}}),t._v(" "),t.form.errors.has("note")?e("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.form.errors.get("note"))}}):t._e()])])]),t._v(" "),e("b-modal",{attrs:{id:"view-medical-modal",title:"Notes Details","title-class":"font-18","no-close-on-backdrop":"",size:"lg","modal-class":"modal-blur","hide-header-close":"","footer-class":"bg-light-alpha border-top d-flex justify-content-end",lazy:""},scopedSlots:t._u([{key:"modal-footer",fn:function(a){var s=a.cancel;return[e("a",{staticClass:"btn",attrs:{href:"#"},on:{click:s}},[t._v("Dismiss")])]}}])},[t.selectedMedicalNote?e("div",{staticClass:"row"},[e("div",{staticStyle:{"white-space":"pre-wrap"},domProps:{innerHTML:t._s(t.selectedMedicalNote.note)}})]):t._e()])],1)}),[],!1,null,null,null).exports}}]);