"use strict";(self.webpackChunkmedic_hospital_management=self.webpackChunkmedic_hospital_management||[]).push([[825],{7825:(t,i,a)=>{a.r(i),a.d(i,{default:()=>o});const s=(0,a(538).defineComponent)({name:"NhifClaimForm",props:{admission:{type:Object,default:function(){}}},data:function(){return{form:new window.Form({nhif_claim_auto:!0,admission_id:"",nhif_quantity:1,nhif_amount:0,nhif_item_id:"",claim_no:0,nhif_no:"",claim_period:""}),items:[]}},watch:{"form.nhif_item_id":function(t){if(t){var i=this.items.find((function(i){return i.id===t}));0===this.admission.nhif_amount&&(0===this.admission.invoice.cash_credit&&(this.form.nhif_amount=.01*i.cash_price.charge_value),1===this.admission.invoice.cash_credit&&(this.form.nhif_amount=.01*i.scheme_price.charge_value))}}},methods:{onModalShow:function(){var t=this;setTimeout((function(){var i,a;t.form.admission_id=t.admission.id,t.form.claim_no=null!==(i=t.admission.claim_no)&&void 0!==i?i:0,t.form.claim_period=t.admission.claim_period,t.form.nhif_no=t.admission.nhif_no,t.form.nhif_item_id=null!==(a=t.admission.nhif_item_id)&&void 0!==a?a:"",t.form.nhif_amount=t.admission.nhif_amount?.01*t.admission.nhif_amount:0}),200),this.findRebateItems()},findRebateItems:function(){var t=this;this.$httpClient.get("/datatable/products",{params:{filter:{rebate:!0}}}).then((function(i){var a=i.data;t.items=a.data,1===a.data.length&&(t.form.nhif_item_id=a.data[0].id)})).catch()},submitClaim:function(){var t=this;this.form.post("/nhif-claim").then((function(){t.$toast.success("The claim process completed successfully"),t.$emit("claim:submitted"),t.$bvModal.hide("nhif-claim-modal")})).catch()}}});const o=(0,a(1900).Z)(s,(function(){var t=this,i=t._self._c;t._self._setupProxy;return i("div",[i("b-modal",{attrs:{id:"nhif-claim-modal",title:"Discharge Form",lazy:"","no-close-on-backdrop":"","no-enforce-focus":!0,"hide-header-close":"","modal-class":"modal-blur","content-class":"bg-white rounded-3","footer-class":"d-flex justify-content-between border-top"},on:{show:t.onModalShow},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t.admission?i("span",[t._v(t._s(t.admission.patient.name))]):t._e()]},proxy:!0},{key:"modal-footer",fn:function(a){var s=a.cancel;return[i("button",{staticClass:"btn btn-light me-2",attrs:{disabled:t.form.processing},on:{click:s}},[t._v("\n        Close\n      ")]),t._v(" "),i("button",{staticClass:"btn btn-primary",attrs:{form:"claimForm",disabled:t.form.processing}},[t._v("\n        Submit\n      ")])]}}])},[t._v(" "),t.admission?i("form",{staticClass:"align-items-center",attrs:{id:"claimForm"},on:{submit:function(i){return i.preventDefault(),t.submitClaim.apply(null,arguments)}}},[i("div",{staticClass:"mb-3 row"},[i("label",{staticClass:"col-4 col-form-label required"},[t._v("Admission Date")]),t._v(" "),i("div",{staticClass:"col-8"},[i("date-picker",{attrs:{"default-date":t.admission.date,disabled:"",value:t.admission.date}})],1)]),t._v(" "),i("div",{staticClass:"mb-3 row"},[i("label",{staticClass:"col-4 col-form-label required"},[t._v("Discharge Date")]),t._v(" "),i("div",{staticClass:"col-8"},[i("date-picker",{attrs:{"default-date":t.admission.discharged_at,disabled:"",value:t.admission.discharged_at}})],1)]),t._v(" "),i("div",{staticClass:"mb-3 row"},[i("label",{staticClass:"col-4 col-form-label required"},[t._v("No of Days")]),t._v(" "),i("div",{staticClass:"col-8"},[i("input",{staticClass:"form-control",attrs:{type:"number",disabled:""},domProps:{value:t.admission.bed_days}})])]),t._v(" "),i("div",{staticClass:"mb-3 row"},[i("label",{staticClass:"col-4 col-form-label"},[t._v("Rebate Product")]),t._v(" "),i("div",{staticClass:"col-8"},[i("v-select",{attrs:{disabled:null!==t.admission.rebate_date,label:"name",options:t.items,clearable:!1,reduce:function(t){return t.id}},model:{value:t.form.nhif_item_id,callback:function(i){t.$set(t.form,"nhif_item_id",i)},expression:"form.nhif_item_id"}}),t._v(" "),t.form.hasError("nhif_item_id")?i("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.form.getError("nhif_item_id"))}}):t._e()],1)]),t._v(" "),i("div",{staticClass:"mb-3 row"},[i("label",{staticClass:"col-4 col-form-label"},[t._v("Amount & Qty")]),t._v(" "),i("div",{staticClass:"col-4"},[i("medic-money",{attrs:{disabled:null!==t.admission.rebate_date,value:t.form.nhif_amount},on:{input:function(i){t.form.nhif_amount=i}}}),t._v(" "),t.form.hasError("nhif_amount")?i("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.form.getError("nhif_amount"))}}):t._e()],1),t._v(" "),i("div",{staticClass:"col-4"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.nhif_quantity,expression:"form.nhif_quantity"}],staticClass:"form-control",attrs:{type:"number",disabled:null!==t.admission.rebate_date},domProps:{value:t.form.nhif_quantity},on:{input:function(i){i.target.composing||t.$set(t.form,"nhif_quantity",i.target.value)}}}),t._v(" "),t.form.hasError("nhif_quantity")?i("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.form.getError("nhif_quantity"))}}):t._e()])]),t._v(" "),i("div",{staticClass:"row"},[i("label",{staticClass:"col-4 col-form-label pt-0"},[t._v("Membership Number")]),t._v(" "),i("div",{staticClass:"col-8"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.nhif_no,expression:"form.nhif_no"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.nhif_no},on:{input:function(i){i.target.composing||t.$set(t.form,"nhif_no",i.target.value)}}})])])]):t._e()])],1)}),[],!1,null,"ee90fa36",null).exports}}]);