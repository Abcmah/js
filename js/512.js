"use strict";(self.webpackChunkmedic_hospital_management=self.webpackChunkmedic_hospital_management||[]).push([[512],{7148:(e,a,t)=>{t.d(a,{Z:()=>r});var s=t(1519),i=t.n(s)()((function(e){return e[1]}));i.push([e.id,".styled-table[data-v-84f8869c]{border-collapse:collapse;font-family:sans-serif;font-size:13px;margin:0;width:100%}.styled-table thead tr[data-v-84f8869c]{background-color:#009879;color:#fff;text-align:left}.styled-table td[data-v-84f8869c],.styled-table th[data-v-84f8869c]{padding:6px 10px}.styled-table tbody tr[data-v-84f8869c]{//border-bottom:1px solid #ddd}.styled-table tbody tr td[data-v-84f8869c]{border:1px solid #f3f3f3}.styled-table tbody tr[data-v-84f8869c]:nth-of-type(2n){//background-color:#f3f3f3}.styled-table tbody tr.active-row[data-v-84f8869c]{color:#009879;font-weight:700}",""]);const r=i},2512:(e,a,t)=>{t.r(a),t.d(a,{default:()=>l});var s=t(538),i=t(1902);const r=(0,s.defineComponent)({name:"AdmissionDischargeForm",props:{admission:{type:Object,default:function(){return null}},dischargeTypes:{type:Array,required:!0}},data:function(){return{dischargeForm:new window.Form({admission_id:"",discharge_type_id:"",date:(new Date).toISOString().slice(0,10)}),bills:[]}},computed:{billBalance:function(){return this.bills.bills?this.bills.balance:0}},methods:{onModalShow:function(){var e=this;setTimeout((function(){e.dischargeForm.admission_id=e.admission.id,e.admission.discharged_at&&(e.dischargeForm.discharge_type_id=e.admission.discharge_type_id,e.dischargeForm.date=e.admission.discharged_at),i.Z.findPatientBills(e.admission.invoice.hashid).then((function(a){var t=a.data;e.bills=t})).catch((function(e){console.log(e)}))}),200)},dischargePatient:function(){var e=this;this.dischargeForm.post("/discharges").then((function(){e.$toast.success("The patient has been discharged"),e.$bvModal.hide("discharge-modal"),e.$emit("admission:discharged")})).catch()}}});var o=t(3379),d=t.n(o),n=t(7148),c={insert:"head",singleton:!1};d()(n.Z,c);n.Z.locals;const l=(0,t(1900).Z)(r,(function(){var e=this,a=e._self._c;e._self._setupProxy;return a("div",[a("b-modal",{attrs:{id:"discharge-modal",title:"Discharge Form",lazy:"","no-close-on-backdrop":"","no-enforce-focus":!0,"hide-header-close":"",scrollable:"","modal-class":"modal-blur","content-class":"bg-white rounded-3 shadow-sm 100vh","footer-class":"d-flex justify-content-between border-top"},on:{show:e.onModalShow},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var s=t.cancel;return[a("button",{staticClass:"btn btn-light me-2",attrs:{disabled:e.dischargeForm.processing},on:{click:s}},[e._v("\n        Close\n      ")]),e._v(" "),e.billBalance>0?a("button",{directives:[{name:"can",rawName:"v-can",value:"can-discharge-with-balance",expression:"'can-discharge-with-balance'"}],staticClass:"btn btn-danger",attrs:{form:"dischargeForm",disabled:e.dischargeForm.processing},on:{click:e.dischargePatient}},[e._v("\n        Discharge\n      ")]):a("button",{staticClass:"btn btn-danger",attrs:{form:"dischargeForm",disabled:e.dischargeForm.processing},on:{click:e.dischargePatient}},[e._v("\n        Discharge\n      ")])]}}])},[a("form",{attrs:{id:"dischargeForm"},on:{submit:function(a){return a.preventDefault(),e.dischargePatient.apply(null,arguments)}}},[a("div",{staticClass:"form-group mb-4"},[a("label",{staticClass:"form-label",attrs:{for:""}},[e._v("Discharge Date ")]),e._v(" "),a("date-picker",{attrs:{value:e.dischargeForm.date,"max-date":new Date},on:{"on-change":function(a,t){e.dischargeForm.date=t}}}),e._v(" "),a("small",{staticClass:"form-hint text-indigo"},[e._v("\n          Invoice date will be modified to discharge date\n        ")]),e._v(" "),e.dischargeForm.hasError("date")?a("span",{staticClass:"text-danger",domProps:{textContent:e._s(e.dischargeForm.getError("date"))}}):e._e()],1),e._v(" "),a("div",{staticClass:"form-group mb-4"},[a("label",{staticClass:"form-label",attrs:{for:"discharge_type_id"}},[e._v("Discharge Type")]),e._v(" "),a("v-select",{staticClass:"bg-white",attrs:{options:e.dischargeTypes,label:"name",reduce:function(e){return e.id},clearable:!1},model:{value:e.dischargeForm.discharge_type_id,callback:function(a){e.$set(e.dischargeForm,"discharge_type_id",a)},expression:"dischargeForm.discharge_type_id"}}),e._v(" "),e.dischargeForm.hasError("discharge_type_id")?a("span",{staticClass:"text-danger",domProps:{textContent:e._s(e.dischargeForm.getError("discharge_type_id"))}}):e._e()],1),e._v(" "),a("div",{staticClass:"form-group mb-4"},[a("label",{staticClass:"form-label",attrs:{for:""}},[e._v("Bill Balance")]),e._v(" "),a("medic-money",{attrs:{value:e.billBalance,disabled:""}})],1)])])],1)}),[],!1,null,"84f8869c",null).exports}}]);